from django.test import TestCase
from django.test import Client, RequestFactory, TestCase

# Create your tests here.
class GetViewsTest(TestCase):
    def setup(self):
        client = Client()

    # Test to make sure the index page loads
    def test_index(self):
        response = self.client.get('/')
        self.assertEqual(response.status_code, 200)

    # Test to make sure the default algorithm lsa returns the correct results
    def test_lsa(self):
        # Create a response with some data to summarize
        response = self.client.post('/', {'text': 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University, California. Together, they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering IPO took place on August 19, 2004, and Google moved to its new headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google, Alphabets leading subsidiary, will continue to be the umbrella company for Alphabets Internet interests. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. It offers services designed for work and productivity Google Docs, Sheets, and Slides, email Gmail/Inbox, scheduling and time management Google Calendar, cloud storage Google Drive, social networking Google+, instant messaging and video chat Google Allo/Duo/Hangouts, language translation Google Translate, mapping and turn-by-turn navigation Google Maps/Waze/Earth/Street View, video sharing YouTube, note-taking Google Keep, and photo organizing and editing Google Photos. The company leads the development of the Android mobile operating system, the Google Chrome web browser, and Chrome OS, a lightweight operating system based on the Chrome browser. Google has moved increasingly into hardware; from 2010 to 2015, it partnered with major electronics manufacturers in the production of its Nexusdevices, and in October 2016, it released multiple hardware products including the Google Pixel smartphone, Home smart speaker, Wifi mesh wireless router, and Daydream View virtual reality headset. The new hardware chief, Rick Osterloh, stated: a lot of the innovation that we want to do now ends up requiring controlling the end-to-end user experience. Google has also experimented with becoming an Internet carrier. In February 2010, it announced Google Fiber, a fiber-optic infrastructure that was installed in Kansas City; in April 2015, it launched Project Fi in the United States, combining Wi-Fi and cellular networks from different providers; and in 2016, it announced the Google Station initiative to make public Wi-Fi available around the world, with initial deployment in India. Alexa, a company that monitors commercial web traffic, lists Google.com as the most visited website in the world. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger. Google is the most valuable brand in the world as of 2017, but has received significant criticism involving issues such as privacy concerns, tax avoidance, antitrust, censorship, and search neutrality. Googles mission statement, from the outset, was to organize the worlds information and make it universally accessible and useful, and its unofficial slogan was Dont be evil. In October 2015, the motto was replaced in the Alphabet corporate code of conduct by the phrase Do the right thing, while the original one was retained in the code of conduct of Google. Around May 2018, the slogan was silently removed from the codes clauses, leaving only one generic reference in its last paragraph.'}, HTTP_HOST='api.localhost')

        # Assert if the summary returned is not the same as a previously calculated correct summary
        self.assertEqual(response.json()['summary'],'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. Google has also experimented with becoming an Internet carrier. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger.')

    # Test to make sure the algorithm lexrank returns the correct results
    def test_lexrank(self):
        # Create a response with some data to summarize
        response = self.client.post('/', {'algorithm': 'lexrank', 'text': 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University, California. Together, they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering IPO took place on August 19, 2004, and Google moved to its new headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google, Alphabets leading subsidiary, will continue to be the umbrella company for Alphabets Internet interests. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. It offers services designed for work and productivity Google Docs, Sheets, and Slides, email Gmail/Inbox, scheduling and time management Google Calendar, cloud storage Google Drive, social networking Google+, instant messaging and video chat Google Allo/Duo/Hangouts, language translation Google Translate, mapping and turn-by-turn navigation Google Maps/Waze/Earth/Street View, video sharing YouTube, note-taking Google Keep, and photo organizing and editing Google Photos. The company leads the development of the Android mobile operating system, the Google Chrome web browser, and Chrome OS, a lightweight operating system based on the Chrome browser. Google has moved increasingly into hardware; from 2010 to 2015, it partnered with major electronics manufacturers in the production of its Nexusdevices, and in October 2016, it released multiple hardware products including the Google Pixel smartphone, Home smart speaker, Wifi mesh wireless router, and Daydream View virtual reality headset. The new hardware chief, Rick Osterloh, stated: a lot of the innovation that we want to do now ends up requiring controlling the end-to-end user experience. Google has also experimented with becoming an Internet carrier. In February 2010, it announced Google Fiber, a fiber-optic infrastructure that was installed in Kansas City; in April 2015, it launched Project Fi in the United States, combining Wi-Fi and cellular networks from different providers; and in 2016, it announced the Google Station initiative to make public Wi-Fi available around the world, with initial deployment in India. Alexa, a company that monitors commercial web traffic, lists Google.com as the most visited website in the world. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger. Google is the most valuable brand in the world as of 2017, but has received significant criticism involving issues such as privacy concerns, tax avoidance, antitrust, censorship, and search neutrality. Googles mission statement, from the outset, was to organize the worlds information and make it universally accessible and useful, and its unofficial slogan was Dont be evil. In October 2015, the motto was replaced in the Alphabet corporate code of conduct by the phrase Do the right thing, while the original one was retained in the code of conduct of Google. Around May 2018, the slogan was silently removed from the codes clauses, leaving only one generic reference in its last paragraph.'}, HTTP_HOST='api.localhost')

        # Assert if the summary returned is not the same as a previously calculated correct summary
        self.assertEqual(response.json()['summary'], 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. Google has also experimented with becoming an Internet carrier. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger.')

    # Test to make sure the algorithm lexrank returns the correct results
    def test_textrank(self):
        # Create a response with some data to summarize
        response = self.client.post('/', {'algorithm': 'textrank', 'text': 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University, California. Together, they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering IPO took place on August 19, 2004, and Google moved to its new headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google, Alphabets leading subsidiary, will continue to be the umbrella company for Alphabets Internet interests. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. It offers services designed for work and productivity Google Docs, Sheets, and Slides, email Gmail/Inbox, scheduling and time management Google Calendar, cloud storage Google Drive, social networking Google+, instant messaging and video chat Google Allo/Duo/Hangouts, language translation Google Translate, mapping and turn-by-turn navigation Google Maps/Waze/Earth/Street View, video sharing YouTube, note-taking Google Keep, and photo organizing and editing Google Photos. The company leads the development of the Android mobile operating system, the Google Chrome web browser, and Chrome OS, a lightweight operating system based on the Chrome browser. Google has moved increasingly into hardware; from 2010 to 2015, it partnered with major electronics manufacturers in the production of its Nexusdevices, and in October 2016, it released multiple hardware products including the Google Pixel smartphone, Home smart speaker, Wifi mesh wireless router, and Daydream View virtual reality headset. The new hardware chief, Rick Osterloh, stated: a lot of the innovation that we want to do now ends up requiring controlling the end-to-end user experience. Google has also experimented with becoming an Internet carrier. In February 2010, it announced Google Fiber, a fiber-optic infrastructure that was installed in Kansas City; in April 2015, it launched Project Fi in the United States, combining Wi-Fi and cellular networks from different providers; and in 2016, it announced the Google Station initiative to make public Wi-Fi available around the world, with initial deployment in India. Alexa, a company that monitors commercial web traffic, lists Google.com as the most visited website in the world. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger. Google is the most valuable brand in the world as of 2017, but has received significant criticism involving issues such as privacy concerns, tax avoidance, antitrust, censorship, and search neutrality. Googles mission statement, from the outset, was to organize the worlds information and make it universally accessible and useful, and its unofficial slogan was Dont be evil. In October 2015, the motto was replaced in the Alphabet corporate code of conduct by the phrase Do the right thing, while the original one was retained in the code of conduct of Google. Around May 2018, the slogan was silently removed from the codes clauses, leaving only one generic reference in its last paragraph.'}, HTTP_HOST='api.localhost')

        # Assert if the summary returned is not the same as a previously calculated correct summary
        self.assertEqual(response.json()['summary'], 'In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google, Alphabets leading subsidiary, will continue to be the umbrella company for Alphabets Internet interests. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. It offers services designed for work and productivity Google Docs, Sheets, and Slides, email Gmail/Inbox, scheduling and time management Google Calendar, cloud storage Google Drive, social networking Google+, instant messaging and video chat Google Allo/Duo/Hangouts, language translation Google Translate, mapping and turn-by-turn navigation Google Maps/Waze/Earth/Street View, video sharing YouTube, note-taking Google Keep, and photo organizing and editing Google Photos. Google has moved increasingly into hardware; from 2010 to 2015, it partnered with major electronics manufacturers in the production of its Nexusdevices, and in October 2016, it released multiple hardware products including the Google Pixel smartphone, Home smart speaker, Wifi mesh wireless router, and Daydream View virtual reality headset. In February 2010, it announced Google Fiber, a fiber-optic infrastructure that was installed in Kansas City; in April 2015, it launched Project Fi in the United States, combining Wi-Fi and cellular networks from different providers; and in 2016, it announced the Google Station initiative to make public Wi-Fi available around the world, with initial deployment in India.')

    # Test to make sure the sentence_count input returns the correct number of sentences
    def test_sentences_count(self):
        # Create a response with some data to summarize
        response = self.client.post('/', {'sentences_count': 2, 'text': 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University, California. Together, they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering IPO took place on August 19, 2004, and Google moved to its new headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google, Alphabets leading subsidiary, will continue to be the umbrella company for Alphabets Internet interests. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet. The companys rapid growth since incorporation has triggered a chain of products, acquisitions, and partnerships beyond Googles core search engine Google Search. It offers services designed for work and productivity Google Docs, Sheets, and Slides, email Gmail/Inbox, scheduling and time management Google Calendar, cloud storage Google Drive, social networking Google+, instant messaging and video chat Google Allo/Duo/Hangouts, language translation Google Translate, mapping and turn-by-turn navigation Google Maps/Waze/Earth/Street View, video sharing YouTube, note-taking Google Keep, and photo organizing and editing Google Photos. The company leads the development of the Android mobile operating system, the Google Chrome web browser, and Chrome OS, a lightweight operating system based on the Chrome browser. Google has moved increasingly into hardware; from 2010 to 2015, it partnered with major electronics manufacturers in the production of its Nexusdevices, and in October 2016, it released multiple hardware products including the Google Pixel smartphone, Home smart speaker, Wifi mesh wireless router, and Daydream View virtual reality headset. The new hardware chief, Rick Osterloh, stated: a lot of the innovation that we want to do now ends up requiring controlling the end-to-end user experience. Google has also experimented with becoming an Internet carrier. In February 2010, it announced Google Fiber, a fiber-optic infrastructure that was installed in Kansas City; in April 2015, it launched Project Fi in the United States, combining Wi-Fi and cellular networks from different providers; and in 2016, it announced the Google Station initiative to make public Wi-Fi available around the world, with initial deployment in India. Alexa, a company that monitors commercial web traffic, lists Google.com as the most visited website in the world. Several other Google services also figure in the top 100 most visited websites, including YouTube and Blogger. Google is the most valuable brand in the world as of 2017, but has received significant criticism involving issues such as privacy concerns, tax avoidance, antitrust, censorship, and search neutrality. Googles mission statement, from the outset, was to organize the worlds information and make it universally accessible and useful, and its unofficial slogan was Dont be evil. In October 2015, the motto was replaced in the Alphabet corporate code of conduct by the phrase Do the right thing, while the original one was retained in the code of conduct of Google. Around May 2018, the slogan was silently removed from the codes clauses, leaving only one generic reference in its last paragraph.'}, HTTP_HOST='api.localhost')

        # Assert if the summary returned is not the same as a previously calculated correct summary
        self.assertEqual(response.json()['summary'], 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, which include online advertising technologies, search engine, cloud computing, software, and hardware. Upon completion of the restructure, Sundar Pichai was appointed CEO of Google, replacing Larry Page, who became the CEO of Alphabet.')
